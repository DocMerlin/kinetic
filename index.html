<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Kinetic by rewardStyle</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Kinetic</h1>
      <h2 class="project-tagline">High-Performance AWS Kinesis Client for Go </h2>
      <a href="https://github.com/rewardStyle/kinetic" class="btn">View on GitHub</a>
      <a href="https://github.com/rewardStyle/kinetic/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/rewardStyle/kinetic/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><a href="https://godoc.org/github.com/rewardStyle/kinetic"><img src="https://godoc.org/github.com/rewardStyle/kinetic?status.svg" alt="GoDoc"></a>
<a href="https://circleci.com/gh/rewardStyle/kinetic/tree/master"><img src="https://circleci.com/gh/rewardStyle/kinetic/tree/master.svg?style=svg&amp;circle-token=8c8b6e0cca0f0fde6ec41b4e02329c406f74a446" alt="Circle CI"></a></p>

<h1>
<a id="kinetic" class="anchor" href="#kinetic" aria-hidden="true"><span class="octicon octicon-link"></span></a>kinetic</h1>

<p>Kinetic is an MIT-licensed high-performance AWS Kinesis Client for Go</p>

<p>Kinetic wraps <a href="https://github.com/sendgridlabs/go-kinesis">sendgridlabs go-kinesis library</a> to provide maximum throughput for AWS Kinesis producers and consumers.
An instance of a Kinetic listener/producer is meant to be used for each shard, so please use it accordingly. If you use more than one instance per-shard then you will
hit the AWS Kinesis throughput <a href="http://docs.aws.amazon.com/kinesis/latest/dev/service-sizes-and-limits.html">limits</a>.</p>

<h3>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h3>

<p>Before using kinetic, you should make sure you have a created a Kinesis stream and your configuration file has the credentails necessary to read and write to the stream. Once this stream exists in AWS, kinetic will ensure it is in the "ACTIVE" state before running.</p>

<h2>
<a id="testing" class="anchor" href="#testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Testing</h2>

<p>Tests are written using <a href="http://goconvey.co/">goconvey</a> and <a href="https://github.com/mhart/kinesalite">kinesalite</a>. Make sure you have kinesalite running locally before attempting to run the tests. They can be run either via the comamnd line:</p>

<div class="highlight highlight-source-shell"><pre>$ go <span class="pl-c1">test</span> -v -cover -race</pre></div>

<p>or via web interface:</p>

<div class="highlight highlight-source-shell"><pre>$ goconvey</pre></div>

<h2>
<a id="running" class="anchor" href="#running" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running</h2>

<p>Kinetic can be used to interface with kinesis like so:</p>

<div class="highlight highlight-source-go"><pre><span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">"</span>github.com/rewardStyle/kinetic<span class="pl-pds">"</span></span>

<span class="pl-c">// Use configuration in /etc/kinetic.conf</span>
<span class="pl-smi">listener</span>, <span class="pl-smi">_</span> <span class="pl-k">:=</span> <span class="pl-c1">new</span>(kinetic.<span class="pl-smi">Listener</span>).<span class="pl-c1">Init</span>()

<span class="pl-c">// Use custom configuration</span>
<span class="pl-smi">producer</span>, <span class="pl-smi">_</span> <span class="pl-k">:=</span> <span class="pl-c1">new</span>(kinetic.<span class="pl-smi">Producer</span>).<span class="pl-c1">InitWithConf</span>(<span class="pl-s"><span class="pl-pds">"</span>your-stream<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>shard-type<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>accesskey<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>secretkey<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>region<span class="pl-pds">"</span></span>)

producer.<span class="pl-c1">Send</span>(<span class="pl-c1">new</span>(kinetic.<span class="pl-smi">Message</span>).<span class="pl-c1">Init</span>([]<span class="pl-k">byte</span>(<span class="pl-s"><span class="pl-pds">`</span>{"foo":"bar"}<span class="pl-pds">`</span></span>), <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>))

<span class="pl-c">// Using Retrieve</span>
<span class="pl-smi">msg</span>, <span class="pl-smi">err</span> <span class="pl-k">:=</span> listener.<span class="pl-c1">Retrieve</span>()
<span class="pl-k">if</span> err != <span class="pl-c1">nil</span> {
    <span class="pl-c1">println</span>(err)
}

<span class="pl-c1">println</span>(<span class="pl-k">string</span>(msg))

<span class="pl-c">// Using Listen - will block unless sent in goroutine</span>
<span class="pl-k">go</span> listener.<span class="pl-c1">Listen</span>(<span class="pl-k">func</span>(msg []<span class="pl-k">byte</span>, wg *sync.<span class="pl-smi">WaitGroup</span>) {
    <span class="pl-c1">println</span>(<span class="pl-k">string</span>(msg))
    wg.<span class="pl-c1">Done</span>()
})

producer.<span class="pl-c1">Send</span>(<span class="pl-c1">new</span>(KinesisMessage).<span class="pl-c1">Init</span>([]<span class="pl-k">byte</span>(<span class="pl-s"><span class="pl-pds">`</span>{"foo":"bar"}<span class="pl-pds">`</span></span>), <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>))

listener.<span class="pl-c1">Close</span>()
producer.<span class="pl-c1">Close</span>()

<span class="pl-c">// Or with Kinesis Firehose</span>
<span class="pl-smi">firehose</span>, <span class="pl-smi">err</span> <span class="pl-k">:=</span> <span class="pl-c1">new</span>(kinetic.<span class="pl-smi">Producer</span>).<span class="pl-c1">Firehose</span>()
<span class="pl-k">if</span> err != <span class="pl-c1">nil</span> {
    <span class="pl-c1">println</span>(err)
}

<span class="pl-c">// Will add a newline character to each message</span>
firehose.<span class="pl-c1">Send</span>(<span class="pl-c1">new</span>(KinesisMessage).<span class="pl-c1">Init</span>([]<span class="pl-k">byte</span>(<span class="pl-s"><span class="pl-pds">`</span>{"foo":"bar"}<span class="pl-pds">`</span></span>), <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>))

firehose.<span class="pl-c1">Close</span>()
</pre></div>

<p>For more examples take a look at the tests. API documentation can be found <a href="https://godoc.org/github.com/rewardStyle/kinetic">here</a>.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/rewardStyle/kinetic">Kinetic</a> is maintained by <a href="https://github.com/rewardStyle">rewardStyle</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
